{"ast":null,"code":"\"use strict\"; // An iterable WeakSet implementation inspired by the iterable WeakMap example code in the WeakRefs specification:\n// https://github.com/tc39/proposal-weakrefs#iterable-weakmaps\n\nmodule.exports = class IterableWeakSet {\n  constructor() {\n    this._refSet = new Set();\n    this._refMap = new WeakMap();\n    this._finalizationRegistry = new FinalizationRegistry(_ref => {\n      let {\n        ref,\n        set\n      } = _ref;\n      return set.delete(ref);\n    });\n  }\n\n  add(value) {\n    if (!this._refMap.has(value)) {\n      const ref = new WeakRef(value);\n\n      this._refMap.set(value, ref);\n\n      this._refSet.add(ref);\n\n      this._finalizationRegistry.register(value, {\n        ref,\n        set: this._refSet\n      }, ref);\n    }\n\n    return this;\n  }\n\n  delete(value) {\n    const ref = this._refMap.get(value);\n\n    if (!ref) {\n      return false;\n    }\n\n    this._refMap.delete(value);\n\n    this._refSet.delete(ref);\n\n    this._finalizationRegistry.unregister(ref);\n\n    return true;\n  }\n\n  has(value) {\n    return this._refMap.has(value);\n  }\n\n  *[Symbol.iterator]() {\n    for (const ref of this._refSet) {\n      const value = ref.deref();\n\n      if (value === undefined) {\n        continue;\n      }\n\n      yield value;\n    }\n  }\n\n};","map":{"version":3,"sources":["/Applications/MAMP/htdocs/aljazira/node_modules/jsdom/lib/jsdom/living/helpers/iterable-weak-set.js"],"names":["module","exports","IterableWeakSet","constructor","_refSet","Set","_refMap","WeakMap","_finalizationRegistry","FinalizationRegistry","ref","set","delete","add","value","has","WeakRef","register","get","unregister","Symbol","iterator","deref","undefined"],"mappings":"AAAA,a,CAEA;AACA;;AACAA,MAAM,CAACC,OAAP,GAAiB,MAAMC,eAAN,CAAsB;AACrCC,EAAAA,WAAW,GAAG;AACZ,SAAKC,OAAL,GAAe,IAAIC,GAAJ,EAAf;AACA,SAAKC,OAAL,GAAe,IAAIC,OAAJ,EAAf;AACA,SAAKC,qBAAL,GAA6B,IAAIC,oBAAJ,CAAyB;AAAA,UAAC;AAAEC,QAAAA,GAAF;AAAOC,QAAAA;AAAP,OAAD;AAAA,aAAkBA,GAAG,CAACC,MAAJ,CAAWF,GAAX,CAAlB;AAAA,KAAzB,CAA7B;AACD;;AAEDG,EAAAA,GAAG,CAACC,KAAD,EAAQ;AACT,QAAI,CAAC,KAAKR,OAAL,CAAaS,GAAb,CAAiBD,KAAjB,CAAL,EAA8B;AAC5B,YAAMJ,GAAG,GAAG,IAAIM,OAAJ,CAAYF,KAAZ,CAAZ;;AACA,WAAKR,OAAL,CAAaK,GAAb,CAAiBG,KAAjB,EAAwBJ,GAAxB;;AACA,WAAKN,OAAL,CAAaS,GAAb,CAAiBH,GAAjB;;AACA,WAAKF,qBAAL,CAA2BS,QAA3B,CAAoCH,KAApC,EAA2C;AAAEJ,QAAAA,GAAF;AAAOC,QAAAA,GAAG,EAAE,KAAKP;AAAjB,OAA3C,EAAuEM,GAAvE;AACD;;AAED,WAAO,IAAP;AACD;;AAEDE,EAAAA,MAAM,CAACE,KAAD,EAAQ;AACZ,UAAMJ,GAAG,GAAG,KAAKJ,OAAL,CAAaY,GAAb,CAAiBJ,KAAjB,CAAZ;;AACA,QAAI,CAACJ,GAAL,EAAU;AACR,aAAO,KAAP;AACD;;AAED,SAAKJ,OAAL,CAAaM,MAAb,CAAoBE,KAApB;;AACA,SAAKV,OAAL,CAAaQ,MAAb,CAAoBF,GAApB;;AACA,SAAKF,qBAAL,CAA2BW,UAA3B,CAAsCT,GAAtC;;AACA,WAAO,IAAP;AACD;;AAEDK,EAAAA,GAAG,CAACD,KAAD,EAAQ;AACT,WAAO,KAAKR,OAAL,CAAaS,GAAb,CAAiBD,KAAjB,CAAP;AACD;;AAEiB,IAAfM,MAAM,CAACC,QAAQ,IAAI;AACpB,SAAK,MAAMX,GAAX,IAAkB,KAAKN,OAAvB,EAAgC;AAC9B,YAAMU,KAAK,GAAGJ,GAAG,CAACY,KAAJ,EAAd;;AACA,UAAIR,KAAK,KAAKS,SAAd,EAAyB;AACvB;AACD;;AACD,YAAMT,KAAN;AACD;AACF;;AA1CoC,CAAvC","sourcesContent":["\"use strict\";\n\n// An iterable WeakSet implementation inspired by the iterable WeakMap example code in the WeakRefs specification:\n// https://github.com/tc39/proposal-weakrefs#iterable-weakmaps\nmodule.exports = class IterableWeakSet {\n  constructor() {\n    this._refSet = new Set();\n    this._refMap = new WeakMap();\n    this._finalizationRegistry = new FinalizationRegistry(({ ref, set }) => set.delete(ref));\n  }\n\n  add(value) {\n    if (!this._refMap.has(value)) {\n      const ref = new WeakRef(value);\n      this._refMap.set(value, ref);\n      this._refSet.add(ref);\n      this._finalizationRegistry.register(value, { ref, set: this._refSet }, ref);\n    }\n\n    return this;\n  }\n\n  delete(value) {\n    const ref = this._refMap.get(value);\n    if (!ref) {\n      return false;\n    }\n\n    this._refMap.delete(value);\n    this._refSet.delete(ref);\n    this._finalizationRegistry.unregister(ref);\n    return true;\n  }\n\n  has(value) {\n    return this._refMap.has(value);\n  }\n\n  * [Symbol.iterator]() {\n    for (const ref of this._refSet) {\n      const value = ref.deref();\n      if (value === undefined) {\n        continue;\n      }\n      yield value;\n    }\n  }\n};\n"]},"metadata":{},"sourceType":"script"}